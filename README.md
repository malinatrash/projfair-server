# Инструкция по запуску `docker-compose` для фронтов

1. **Склонировать репозиторий**:

    ```bash
    git clone https://github.com/malinatrash/projfair-server.git
    ```

2. **Создать файл окружения**:

    - В корне проекта создайте файл `.env`, аналогичный `.env.example`. Этот файл нужен для хранения переменных окружения (пароли для базы данных, хосты и т.п.).

3. **Установить зависимости**:
   В корне проекта выполните команду:

    ```bash
    composer update
    ```

    Это установит все необходимые зависимости для проекта.

4. **Запуск Docker Compose**:
   Соберите и запустите все контейнеры с помощью команды:

    ```bash
    docker-compose -f docker-compose.dev.yml up --build
    ```

5. **Проверьте успешный запуск**:
   Убедитесь, что все контейнеры успешно запустились.

    5.1. Попробуйте открыть PhpMyAdmin на `localhost:8080`:

    - Введите логин `root` и пароль `root`.
    - Проверьте, что база данных `projectfair` существует и содержит пустые таблицы.

        5.2. Откройте `localhost:80`, чтобы проверить, что отображается старый фронт ярмарки.

6. **Загрузка дампа базы данных**:
   6.1. Закиньте файл дампа `.sql` в корень контейнера (самостоятельно разберетесь, как это сделать).

    6.2. Проникните в bash контейнера MySQL:

    ```bash
    docker exec -it dev_db /bin/bash
    ```

    - Пароль для пользователя `root` должен быть `root`.
    - Важно: `dev` — это значение переменной `CONTAINER_PREFIX` из файла `.env`. Если у вас используется другое имя, замените его на актуальное.

        6.3. Восстановите дамп базы данных с помощью команды:

    ```bash
    mysql -u root -p projectfair < latest.sql
    ```

    В процессе будет запрашиваться пароль для пользователя `root`. Он, скорее всего, равен `root`.

7. **Проверьте, что данные загружены**:
   Попробуйте снова открыть `localhost:80`.  
   Должна открыться ярмарка с данными.

8. **Использование нового фронта**:
   Теперь, с новым фронтом, вы можете отправлять запросы на ваш Docker. Удачи! :)
